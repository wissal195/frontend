<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
<section class="section-padding bg-light-white listing-details" *ngFor="let item of hoteldetails">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <!-- Titre de voyage -->
        <div class="voyage-title">
          <h2>{{ annonce?.voyage?.titreVoyage ?? 'Non spécifié' }}</h2>
        </div>
        <hr>
        <div class="listing-details-inner bx-wrapper bg-custom-white padding-20">
          <div class="row">
            <div class="col-lg-8">
              <!-- Vérifiez que annonce, annonce.voyage et annonce.voyage.images existent -->
              <div *ngIf="annonce && annonce.voyage && annonce.voyage.images && annonce.voyage.images.length > 0">
                <!-- Partie 1 : Carrousel principal pour la première image -->
                <ngx-slick-carousel [config]="settings" class="detail-slider-for mb-xl-20 magnific-gallery">
                  <div ngxSlickItem class="slide-item" *ngFor="let image of annonce.voyage.images">
                    <a [href]="image" class="popup">
                      <img [src]="selectedImage || image" class="image-fit" [alt]="annonce.voyage.titreVoyage || 'Image du voyage'">
                    </a>
                  </div>
                </ngx-slick-carousel>

                <!-- Partie 2 : Liste des images sous l'image principale -->
                <div class="image-list mt-4">
                  <div class="row">
                    <div class="col-3" *ngFor="let image of annonce.voyage.images; let i = index">
                      <img [src]="image" class="img-thumbnail" [alt]="'Image ' + (i + 1)" (click)="changeMainImage(image)">
                    </div>
                  </div>
                </div>
              </div>
              <hr>




              <!-- Section Amenities -->
              <!-- Section Amenities -->
              <div class="listing-meta-sec mb-md-80">
                <h4 class="text-custom-black">Services Inclus</h4>
                <p class="text-light-dark">Découvrez les services inclus dans ce voyage.</p>
                <ul class="custom amenities row">

                  <!-- Classe de vol -->
                  <li class="col-md-6 col-sm-12" *ngIf="annonce?.voyage?.vol?.classeVol?.nomClasse">
                    <div class="icon-box text-light-dark">
                      <i class="fas fa-plane"></i>
                      <span>Classe de vol : {{ annonce?.voyage?.vol?.classeVol?.nomClasse ?? 'Non spécifié' }}</span>
                    </div>
                  </li>

                  <!-- Type de circuit -->
                  <li class="col-md-6 col-sm-12" *ngIf="annonce?.voyage?.circuit">
                    <div class="icon-box text-light-dark">
                      <i class="fas fa-route"></i>
                      <span>{{ annonce?.voyage?.circuit === 'prive' ? 'Circuit Privé' : 'Circuit en Groupe' }}
          <span *ngIf="annonce?.voyage?.circuit !== 'prive' && annonce?.voyage?.tailleGroupe">
            (Taille du groupe : {{ annonce?.voyage?.tailleGroupe }})
          </span>
        </span>
                    </div>
                  </li>

                  <!-- Tranche d'âge -->
                  <li class="col-md-6 col-sm-12" *ngIf="annonce?.voyage?.trancheAge">
                    <div class="icon-box text-light-dark">
                      <i class="fas fa-user-group"></i>
                      <span>Tranche d'âge : {{ annonce?.voyage?.trancheAge ?? 'Non spécifié' }}</span>
                    </div>
                  </li>

                  <!-- Guide -->
                  <li class="col-md-6 col-sm-12" *ngIf="annonce?.voyage?.guide">
                    <div class="icon-box text-light-dark">
                      <i class="fas fa-user-tie"></i>
                      <span>{{ annonce?.voyage?.guide === 'oui' ? 'Avec guide' : 'Sans guide' }}
          <span *ngIf="annonce?.voyage?.guide === 'oui' && annonce?.voyage?.langueGuide">
            (Langue : {{ annonce?.voyage?.langueGuide }})
          </span>
        </span>
                    </div>
                  </li>

                  <!-- Compagnie aérienne -->
                  <li class="col-md-6 col-sm-12" *ngIf="annonce?.voyage?.vol?.nomCompagnieAerienne">
                    <div class="icon-box text-light-dark">
                      <i class="fas fa-plane-departure"></i>
                      <span>Compagnie aérienne : {{ annonce?.voyage?.vol?.nomCompagnieAerienne ?? 'Non spécifié' }}</span>
                    </div>
                  </li>

                  <!-- Pays de départ et d'arrivée -->
                  <li class="col-md-6 col-sm-12" *ngIf="annonce?.voyage?.vol?.paysDepart && annonce?.voyage?.vol?.paysArrivee">
                    <div class="icon-box text-light-dark">
                      <i class="fas fa-plane-departure"></i>
                      <span>De : {{ annonce?.voyage?.vol?.paysDepart ?? 'Inconnu' }}
        <i class="fas fa-plane-arrival"></i> → Vers : {{ annonce?.voyage?.vol?.paysArrivee ?? 'Inconnu' }}</span>
                    </div>
                  </li>

                </ul>
              </div>

              <hr>

              <div class="container">
                <h4 class="listing-meta-sec mb-md-80 text-custom-black">Services Inclus</h4>
                <div class="row">

                  <div class="col-lg-4 col-sm-6">
                    <div class="contact-info-box mb-md-40">
                      <!-- Icône simple sans couleur de fond -->
                      <i class="fas fa-paw"></i>
                      <h6 class="text-theme fw-600">Bien-être des animaux</h6>
                    </div>
                  </div>

                  <div class="col-lg-4 col-sm-6">
                    <div class="contact-info-box mb-md-40">
                      <!-- Icône simple sans couleur de fond -->
                      <i class="fas fa-handshake"></i>
                      <h6 class="text-theme fw-600">Soutien aux communautés locales</h6>
                    </div>
                  </div>

                  <div class="col-lg-4 col-sm-6">
                    <div class="contact-info-box">
                      <!-- Icône simple sans couleur de fond -->
                      <i class="fas fa-leaf"></i>
                      <h6 class="text-theme fw-600">Programmes de développement durable</h6>
                    </div>
                  </div>

                </div>
              </div>

              <hr>





              <!-- Section Itinéraires -->
              <!-- Section Itinéraires -->
              <div class="listing-meta-sec mb-md-80">
                <h4 class="text-custom-black">Services Inclus</h4>
                <p class="text-light-dark">Découvrez les détails de chaque jour de votre voyage.</p>
                <ngb-accordion [closeOthers]="true" activeIds="static-1" class="custom-accordion d-block">
                  <ngb-panel id="static-{{i + 1}}" *ngFor="let itineraire of itineraires; let i = index">
                    <ng-template ngbPanelTitle>
                      Jour {{ i + 1 }} : {{ itineraire.destinationRegionJour }}
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <div class="itinerary-details">
                        <div *ngFor="let service of itineraire.services" class="service-card">
                          <!-- Activités avec style gris fin -->
                          <p class="activity-text">{{ itineraire.activites }}</p>
                          <!-- Hébergement -->
                          <div class="service-section">
                            <h6 class="service-subtitle">Hébergement :</h6>
                            <ul class="service-list">
                              <li *ngFor="let transport of service.serviceTransports">
                                {{ service.hotel.nomHotel }}
                              </li>
                            </ul>
                          </div>

                          <!-- Transports -->
                          <div class="service-section" *ngIf="service.serviceTransports.length > 0">
                            <h6 class="service-subtitle">Transports</h6>
                            <ul class="service-list">
                              <li *ngFor="let transport of service.serviceTransports">
                                {{ transport.transport.compagnie }} - {{ transport.transport.typeTransport.nomType }}
                              </li>
                            </ul>
                          </div>

                          <!-- Nourriture -->
                          <div class="service-section" *ngIf="service.serviceNourritures.length > 0">
                            <h6 class="service-subtitle">Nourriture</h6>
                            <ul class="service-list">
                              <li *ngFor="let nourriture of service.serviceNourritures">
                                {{ nourriture.nourriture.typeNourriture.nomType }} - {{ nourriture.nourriture.options }}
                              </li>
                            </ul>
                          </div>
                        </div>


                      </div>
                    </ng-template>
                  </ngb-panel>
                </ngb-accordion>
              </div>
<hr>

              <!--------nouvelle section ---------->
              <!-- Section Amenities -->
              <div class="services-section included-section">
                <h4 class="text-custom-black">Services Inclus</h4>
                <p class="text-light-dark">Découvrez les services inclus dans ce voyage.</p>

                <ngb-accordion [closeOthers]="true" class="custom-accordion d-block">
                  <!-- Accommodation Panel -->
                  <ngb-panel id="accommodation-panel">
                    <ng-template ngbPanelTitle>
                      <span class="category-icon included-icon"><i class="fas fa-hotel"></i></span> Hébergement
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <ul class="included-list">
                        <li *ngFor="let itineraire of itineraires">

                          <ul>
                            <li *ngFor="let service of itineraire.services">
                              {{ service.hotel.nomHotel }}
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </ng-template>
                  </ngb-panel>

                  <!-- Transport Panel -->
                  <ngb-panel id="transport-panel">
                    <ng-template ngbPanelTitle>
                      <span class="category-icon included-icon"><i class="fas fa-shuttle-van"></i></span> Transport
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <ul class="included-list">
                        <li *ngFor="let itineraire of itineraires">

                          <ul>
                            <li *ngFor="let service of itineraire.services">
                <span *ngFor="let transport of service.serviceTransports">
                 {{ transport.transport.typeTransport.nomType }}
                </span>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </ng-template>
                  </ngb-panel>

                  <!-- Food Panel -->
                  <ngb-panel id="food-panel">
                    <ng-template ngbPanelTitle>
                      <span class="category-icon included-icon"><i class="fas fa-utensils"></i></span> Nourriture
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <ul class="included-list">
                        <li *ngFor="let itineraire of itineraires">
                          <strong>Jour {{ itineraire.destinationRegionJour }}:</strong>
                          <ul>
                            <li *ngFor="let service of itineraire.services">
                <span *ngFor="let nourriture of service.serviceNourritures">
                  {{ nourriture.nourriture.typeNourriture.nomType }}
                </span>
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </ng-template>
                  </ngb-panel>

                  <!-- Guide Panel -->
                  <ngb-panel id="guide-panel" *ngIf="annonce?.voyage?.guide === 'oui'">
                    <ng-template ngbPanelTitle>
                      <span class="category-icon included-icon"><i class="fas fa-user-check"></i></span> Guide
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <p>Un guide est inclus dans ce voyage.</p>
                    </ng-template>
                  </ngb-panel>
                </ngb-accordion>
              </div>

              <div class="services-section excluded-section">
                <h4 class="text-custom-black">Services Non Inclus</h4>
                <p class="text-light-dark">Découvrez les services non inclus dans ce voyage.</p>

                <ngb-accordion [closeOthers]="true" class="custom-accordion d-block">
                  <!-- Assurance Panel -->
                  <ngb-panel id="assurance-panel">
                    <ng-template ngbPanelTitle>
                      <span class="category-icon excluded-icon"><i class="fas fa-shield-alt"></i></span> Assurance
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <p>L'assurance n'est pas incluse dans ce voyage.</p>
                    </ng-template>
                  </ngb-panel>

                  <!-- Guide Panel -->
                  <ngb-panel id="no-guide-panel" *ngIf="annonce?.voyage?.guide === 'non'">
                    <ng-template ngbPanelTitle>
                      <span class="category-icon excluded-icon"><i class="fas fa-user-times"></i></span> Guide
                    </ng-template>
                    <ng-template ngbPanelContent>
                      <p>Un guide n'est pas inclus dans ce voyage.</p>
                    </ng-template>
                  </ngb-panel>
                </ngb-accordion>
              </div>
              <hr>
<!---------noverview----------->
              <!-- Section Overview -->
              <div class="listing-meta-sec mb-md-80">
                <div class="tab-inner">
                  <div class="row">
                    <div class="col-md-5">
                      <div class="hotel-type mb-xl-20 bg-light-white padding-10">
                        <ul class="custom">
                          <li class="text-light-dark">
                            <label class="no-margin text-custom-blue">Hotel Type:</label>{{item.rating}} star
                          </li>
                          <li class="text-light-dark" *ngFor="let hotelinfo of item.overview.hotelinfo">
                            <label class="no-margin text-custom-blue">{{hotelinfo.title}}:</label>{{hotelinfo.text}}
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="col-md-7">
                      <div class="listing-testimonial padding-20 bg-light-white mb-xl-20">
                        <ngx-slick-carousel [config]="settingsTesti" class="testimonial-inner detail-testimonial">
                          <div ngxSlickItem class="tesimonial-item" *ngFor="let testimonials of getTestimonials(item.overview.testimonials)">
                            <cite class="text-custom-blue fs-16">{{testimonials.text | slice:0:135}}</cite>
                            <div class="testimonial-author" *ngFor="let author of getAuthor(testimonials.author)">
                              <div class="author-img">
                                <img [src]="author.image" class="rounded-circle" [alt]="author.name">
                              </div>
                              <div class="author-name ml-2">
                                <h6 class="text-custom-black no-margin fs-14 fw-500">{{author.name}}</h6>
                                <p class="no-margin text-light-dark">{{author.post}}</p>
                              </div>
                            </div>
                          </div>
                        </ngx-slick-carousel>
                      </div>
                    </div>

                  </div>
                </div>
              </div>
              <hr>

              <!-----------fin nouvelle section ------------>
              <div class="reservation-section">
                <div class="reservation-box">
                  <div class="top-info">
                    <div class="date-info">
                      <p class="start-date"><strong>À partir du</strong> Samedi 12 avr., 2025</p>
                      <span class="arrow">→</span>
                      <p class="end-date"><strong>Jusqu'au</strong> Vendredi 18 avr., 2025</p>
                    </div>
                    <div class="price-container">
                      <p class="price"><strong>De :</strong> €2,499</p>
                    </div>
                  </div>

                  <!-- Informations supplémentaires sous les dates -->
                  <div class="bottom-info">
                    <p class="language"><strong>Langue :</strong> Anglais</p>
                    <p><span class="on-demand">Départ sur demande</span></p>
                    <p class="almost-gone"><strong>Presque épuisé</strong></p>
                  </div>

                  <div >
                    <button class="btn-first btn-submit full-width btn-height">Confirmer votre demande </button>
                  </div>
                </div>
              </div>

            </div>

            <!-- Colonne de droite (Enquiry Now, Hotel Grid, Need Help) -->
            <div class="col-lg-4">
              <div class="row">
                <div class="col-12">
                  <div class="quick-quote bx-wrapper padding-20 mb-xl-30">

                    <h5 class="text-custom-black">Need Help?</h5>
                    <div class="travel-details">
                      <div class="date-display">
                        <i class="far fa-calendar"></i>
                        <span class="text-light-dark">{{ annonce?.voyage?.vol?.dateDepart | date: 'dd MMM yyyy' }} - {{ annonce?.voyage?.vol?.dateArrivee | date: 'dd MMM yyyy' }}</span>
                      </div>
                      <div class="price-display">
                        <span class="text-light-dark">Price:</span>
                        <span class="price-value margin-left:10px">{{ annonce?.voyage?.prix | currency: 'EUR' }}</span>
                      </div>
                    </div>
                    <button  class="btn-first btn-submit full-width btn-height">Check Availability</button>



                  </div>

                  <div class="hotel-grid mb-xl-30" *ngFor="let hotel of getHotelByCategory(item.category) | slice:0:1">
                    <div class="hotel-grid-wrapper bx-wrapper">
                      <div class="image-sec p-relative">
                        <a routerLink="/hotel-details/{{hotel.id}}">
                          <img src="assets/images/nature.jpg" class="full-width" [alt]="hotel.title">
                        </a>
                      </div>
                      <div class="hotel-grid-caption padding-20 bg-custom-white p-relative">
                        <h4 class="title fs-16">
                          <a routerLink="/hotel-details/{{hotel.id}}" class="text-custom-black">{{hotel.title}}
                            <small class="text-light-dark">{{hotel.location}}</small>
                          </a>
                        </h4>
                        <span class="price">
                          <small>avg/night</small>${{hotel.price | number:'1.0-0'}}
                        </span>
                        <div class="feedback">
                          <div class="ratings">
                            <ngb-rating [max]="5" [(rate)]="hotel.rating" [readonly]="true" class="rating">
                              <ng-template let-fill="fill" let-index="index">
                                <span class="text-light-white fs-12" [class.text-yellow]="fill === 100">
                                  <i class="fas fa-star"></i>
                                </span>
                              </ng-template>
                            </ngb-rating>
                          </div>
                          <span class="review fs-12 text-light-dark">{{hotel.reviews.length}} reviews</span>
                        </div>
                        <p class="text-light-dark">Nunc cursus libero purus ac congue arcu cursus ut sed vitae pulvinar massa idporta nequetiam.</p>
                        <div class="action">
                          <a routerLink="/hotel-details/{{hotel.id}}" class="btn-second btn-small">View</a>
                          <a routerLink="/booking" class="btn-first btn-submit">Book</a>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="need-help bx-wrapper padding-20">
                    <h5 class="text-custom-black">Need Help?</h5>
                    <p class="text-light-dark">We would be more than happy to help you. Our team advisor are 24/7 at your service to help you.</p>
                    <ul class="custom">
                      <li class="text-custom-blue fs-18">
                        <i class="fas fa-phone-alt"></i>
                        <a href="#" class="text-light-dark">(+347) 123 456 7890</a>
                      </li>
                      <li class="text-custom-blue fs-18">
                        <i class="fas fa-envelope"></i>
                        <a href="#" class="text-light-dark fs-14">example@example.com</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <section class="section-padding bg-light-white contact-top">

  </section>
</section>
